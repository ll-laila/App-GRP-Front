import './polyfills.server.mjs';
import{b as fe}from"./chunk-YI7DQ4LI.mjs";import{a as ve}from"./chunk-3GJOX54U.mjs";import{a as he}from"./chunk-HXC2Y4JH.mjs";import{a as z,b as xe}from"./chunk-GQ7BGXIS.mjs";import{b as se}from"./chunk-2IZGWHSK.mjs";import{a as de,b as ue}from"./chunk-4O54P57Y.mjs";import{a as pe,b as _e}from"./chunk-AHRJE2FH.mjs";import{a as Ce,b as ge}from"./chunk-XXWZ3SQU.mjs";import"./chunk-D4RJRHB5.mjs";import{b as te,c as ne,f as ie,h as oe,i as ae,j as re,k as me,l as le,n as ce}from"./chunk-MG5ECMPI.mjs";import{C as j,D as Q,E as J,I as K,M as X,N as I,T as Y,U as Z,i as P,ma as $,na as ee,o as U,p as q,r as A}from"./chunk-BJSQRMLK.mjs";import"./chunk-XR27ODAI.mjs";import{c as W}from"./chunk-TMD5LWM3.mjs";import"./chunk-FO7JI6NW.mjs";import"./chunk-ENKAC57S.mjs";import{e as H,f as O}from"./chunk-AO72HDTW.mjs";import"./chunk-TX6S5BIU.mjs";import"./chunk-OCP4HJ6B.mjs";import{Ab as M,Eb as C,Kb as V,Mb as k,Nb as L,Ob as D,Pb as n,Qb as o,Rb as p,Ub as T,Vb as w,Yb as h,_b as c,ga as b,gc as F,hb as r,hc as l,ic as S,jc as G,ka as B,nc as x,oc as f,pc as v,rc as N,va as s,wa as d,xa as _,xc as R,ya as g,yb as y,zb as E}from"./chunk-NYO24GET.mjs";import"./chunk-XAJIYFV3.mjs";var Se=()=>[O,Y,Z,I,$,W,P,import("./chunk-FBVZH4FD.mjs").then(m=>m.NgTemplateOutlet)],be=()=>[import("./chunk-FBVZH4FD.mjs").then(m=>m.NgTemplateOutlet)];function ye(m,u){if(m&1){let e=w();n(0,"c-nav-item",4)(1,"button",12),h("click",function(){s(e);let t=c(2);return d(t.retour())}),l(2,"Return"),o()()}if(m&2){let e=c(2);r(),C("routerLink",e.returnUrl)}}function we(m,u){m&1&&p(0,"c-spinner",9)}function Te(m,u){m&1&&(_(),p(0,"svg",10))}function Fe(m,u){m&1&&T(0)}function Ee(m,u){m&1&&T(0)}function Me(m,u){if(m&1){let e=w();n(0,"c-row",2)(1,"c-nav",3),y(2,ye,3,1,"c-nav-item",4),n(3,"c-nav-item",5)(4,"button",6),h("click",function(){s(e);let t=c();return d(t.cancel())}),l(5," Cancel "),o()(),n(6,"c-nav-item",4)(7,"button",7),h("click",function(){s(e);let t=c();return d(t.reset())}),l(8,"Reset"),o()(),n(9,"c-nav-item",4)(10,"button",8),h("click",function(){s(e);let t=c();return d(t.create())}),y(11,we,1,0,"c-spinner",9)(12,Te,1,0,":svg:svg",10),l(13," Create "),o()()()(),y(14,Fe,1,0,"ng-container",11)(15,Ee,1,0,"ng-container",11)}if(m&2){let e=c(),i=F(7),t=F(9);r(2),V(e.toReturn?2:-1),r(9),V(e.sending?11:12),r(3),C("ngTemplateOutlet",i),r(),C("ngTemplateOutlet",t)}}function Ve(m,u){m&1&&T(0)}function ke(m,u){if(m&1&&y(0,Ve,1,0,"ng-container",11),m&2){c();let e=F(7);C("ngTemplateOutlet",e)}}function Le(m,u){if(m&1&&(n(0,"option",27),l(1),o()),m&2){let e=u.$implicit;C("value",e),r(),S(e)}}function De(m,u){if(m&1){let e=w();n(0,"c-card",2)(1,"c-card-header")(2,"strong",13),l(3,'Veuillez remplir les informations ci-dessous pour cr\xE9er une nouvelle "facture"'),o()(),n(4,"c-card-body")(5,"c-row",14)(6,"c-col",15),_(),p(7,"svg",16),g(),n(8,"label",17),l(9,"Code"),o(),n(10,"input",18),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.code,t)||(a.itemCommande.code=t),d(t)}),o()(),n(11,"c-col",15),_(),p(12,"svg",19),g(),n(13,"label",20),l(14,"Date d'\xE9xperation"),o(),n(15,"input",21),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.dateExpedition,t)||(a.itemCommande.dateExpedition=t),d(t)}),o()(),n(16,"c-col",15),_(),p(17,"svg",19),g(),n(18,"label",22),l(19,"Date d'\xE9xpedition"),o(),n(20,"input",23),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.dateExpedition,t)||(a.itemCommande.dateExpedition=t),d(t)}),o()(),n(21,"c-col",15),_(),p(22,"svg",24),g(),n(23,"label",25),l(24,"Taxe"),o(),n(25,"select",26),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.taxe,t)||(a.itemCommande.taxe=t),d(t)}),n(26,"option",27),l(27),o()(),n(28,"button",28),h("click",function(){s(e);let t=c();return d(t.navigateToTaxeCreate())}),_(),p(29,"svg",10),o()(),g(),n(30,"c-col",15),_(),p(31,"svg",29),g(),n(32,"label",30),l(33,"Remise"),o(),n(34,"input",31),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.rabais,t)||(a.itemCommande.rabais=t),d(t)}),o()(),n(35,"c-col",15),_(),p(36,"svg",32),g(),n(37,"label",33),l(38,"Type de Remise "),o(),n(39,"select",34),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.typeRabais,t)||(a.itemCommande.typeRabais=t),d(t)}),L(40,Le,2,2,"option",27,k),o()(),n(42,"c-col",15),_(),p(43,"svg",24),g(),n(44,"label",25),l(45,"Taxe"),o(),n(46,"c-input-group")(47,"select",26),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.taxe,t)||(a.itemCommande.taxe=t),d(t)}),n(48,"option",27),l(49),o()(),n(50,"button",28),h("click",function(){s(e);let t=c();return d(t.navigateToTaxeCreate())}),_(),p(51,"svg",10),o()()(),g(),n(52,"c-col",15),_(),p(53,"svg",35),g(),n(54,"label",36),l(55,"Client"),o(),n(56,"c-input-group")(57,"select",37),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.client,t)||(a.itemCommande.client=t),d(t)}),n(58,"option",27),l(59),o()(),n(60,"button",28),h("click",function(){s(e);let t=c();return d(t.navigateToClientCreate())}),_(),p(61,"svg",10),o()()(),g(),n(62,"c-col",15),_(),p(63,"svg",38),g(),n(64,"label",39),l(65,"Devise"),o(),n(66,"c-input-group")(67,"select",40),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.devises,t)||(a.itemCommande.devises=t),d(t)}),n(68,"option",27),l(69),o()(),n(70,"button",28),h("click",function(){s(e);let t=c();return d(t.navigateToDevisesCreate())}),_(),p(71,"svg",10),o()()()()()()}if(m&2){let e=c();r(10),x("ngModel",e.itemCommande.code),r(5),x("ngModel",e.itemCommande.dateExpedition),r(5),x("ngModel",e.itemCommande.dateExpedition),r(5),x("ngModel",e.itemCommande.taxe),r(),C("value",e.itemCommande.taxe),r(),S(e.itemCommande.taxe==null?null:e.itemCommande.taxe.nom),r(7),x("ngModel",e.itemCommande.rabais),r(5),x("ngModel",e.itemCommande.typeRabais),r(),D(e.typeRabaisEnumList),r(7),x("ngModel",e.itemCommande.taxe),r(),C("value",e.itemCommande.taxe),r(),S(e.itemCommande.taxe==null?null:e.itemCommande.taxe.nom),r(8),x("ngModel",e.itemCommande.client),r(),C("value",e.itemCommande.client),r(),S(e.itemCommande.client==null?null:e.itemCommande.client.nom),r(8),x("ngModel",e.itemCommande.devises),r(),C("value",e.itemCommande.devises),r(),S(e.itemCommande.devises==null||e.itemCommande.devises.nouvelleDevise==null?null:e.itemCommande.devises.nouvelleDevise.labelle)}}function Re(m,u){if(m&1){let e=w();n(0,"tr")(1,"td"),l(2),o(),n(3,"td"),l(4),o(),n(5,"td"),l(6),o(),n(7,"td")(8,"input",53),v("ngModelChange",function(t){let a=s(e).$implicit;return f(a.quantite,t)||(a.quantite=t),d(t)}),h("ngModelChange",function(t){let a=s(e).$implicit;return d(a.disponible=a.disponible?a.disponible-t:a.disponible)}),o()(),n(9,"td"),l(10),o(),n(11,"td"),l(12),o(),n(13,"td")(14,"input",54),v("ngModelChange",function(t){let a=s(e).$implicit;return f(a.disque,t)||(a.disque=t),d(t)}),o()(),n(15,"td",55)(16,"button",56),h("click",function(){s(e);let t=c(2);return d(t.deleteFactureProduit(t.itemCommandeProduit))}),_(),p(17,"svg",57),o()()()}if(m&2){let e=u.$implicit;r(2),G(" ",e.produit!=null?e.produit.nom:"null"," "),r(2),S(e.prix),r(2),S(e.total),r(2),C("min",0),x("ngModel",e.quantite),r(2),S(e.produit==null||e.produit.taxe==null?null:e.produit.taxe.nom),r(2),S(e.disponible),r(2),x("ngModel",e.disque)}}function We(m,u){if(m&1){let e=w();n(0,"c-card",2)(1,"c-card-header")(2,"strong"),l(3,"S\xE9lectionner des produits"),o()(),n(4,"c-card-body")(5,"table",41)(6,"thead",42)(7,"tr")(8,"th",43),l(9,"Produit"),o(),n(10,"th",43),l(11,"Prix"),o(),n(12,"th",43),l(13,"Total"),o(),n(14,"th",43),l(15,"Quantite"),o(),n(16,"th",43),l(17,"Taxe"),o(),n(18,"th",43),l(19,"Disponible"),o(),n(20,"th",43),l(21,"Remise"),o(),n(22,"th",44),l(23,"Actions"),o()()(),n(24,"tbody"),L(25,Re,18,8,"tr",null,k),o()()()(),n(27,"c-card")(28,"c-input-group")(29,"c-card-body")(30,"c-col",15)(31,"label",45),l(32,"Unit\xE9s total "),o(),p(33,"input",46),o(),n(34,"c-col",15)(35,"label",47),l(36,"Remise Global"),o(),n(37,"input",48),v("ngModelChange",function(t){s(e);let a=c();return f(a.itemCommande.remiseGlobal,t)||(a.itemCommande.remiseGlobal=t),d(t)}),o()(),n(38,"c-col",15)(39,"label",49),l(40,"Sous total"),o(),p(41,"input",50),o(),n(42,"c-col",15)(43,"label",51),l(44,"Total"),o(),p(45,"input",52),o()()()()}if(m&2){let e=c();r(5),C("hover",!0)("responsive",!0)("striped",!0),r(20),D(e.itemCommande.commandeProduit),r(8),C("value",e.itemCommande.totalUnites),r(4),x("ngModel",e.itemCommande.remiseGlobal),r(4),C("value",e.itemCommande.sousTotal),r(4),C("value",e.itemCommande.total)}}var nt=(()=>{let u=class u{constructor(){this.sending=!1,this.standAlon=!0,this.factureService=b(xe),this.taxeService=b(ge),this.commandeService=b(se),this.commandeProduitService=b(fe),this.clientService=b(ue),this.devisesService=b(_e),this.validator=ve.init(()=>this.itemFacture),this.router=b(H),this.typeRabaisEnumList=Object.values(he)}set itemsFacture(i){this.factureService.items=i}reset(i=!0){(i||this.itemFacture==null)&&(this.itemFacture=new z),this.validator.reset()}get itemFacture(){return this.factureService.item}get toReturn(){return this.factureService.toReturn()}set itemFacture(i){this.factureService.item=i}cancel(){this.itemFacture=new z}set itemsCommande(i){this.commandeService.items=i}navigateToTaxeCreate(){this.taxeService.returnUrl=this.router.url,this.factureService.keepData=!0,this.router.navigate(["/parametres/taxe/create"]).then()}navigateToClientCreate(){this.clientService.returnUrl=this.router.url,this.factureService.keepData=!0,this.router.navigate(["/contacts/client/create"]).then()}get client(){return this.itemFacture.client==null&&(this.itemFacture.client=new de),this.itemFacture.client}set client(i){this.itemFacture.client=i}get itemCommande(){return this.commandeService.item}get returnUrl(){return this.factureService.returnUrl}set itemCommande(i){this.commandeService.item=i}set itemsCommandeProduit(i){this.commandeProduitService.items=i}get itemCommandeProduit(){return this.commandeProduitService.item}set itemCommandeProduit(i){this.commandeProduitService.item=i}ngOnInit(){this.commandeService.findById(this.itemCommande.id).subscribe({next:i=>{this.commandeService.item=i,console.log(this.commandeService.item)},error:i=>console.log(i)})}retour(){this.router.navigate(["/ventes/facture/facture"]).then()}create(){if(console.log(this.itemFacture),!this.validator.validate()){console.log(this.validator);return}this.sending=!0,this.factureService.create().subscribe({next:i=>{if(this.sending=!1,i!=null){if(this.itemFacture=i,this.toReturn){this.router.navigate([this.returnUrl]).then();return}this.router.navigate(["/ventes/facture/facture"]).then()}},error:i=>{this.sending=!1,console.log(i),this.validator.import(i.error)}}),this.router.navigate(["/ventes/facture/autre"]).then()}get devises(){return this.itemFacture.devises==null&&(this.itemFacture.devises=new pe),this.itemFacture.devises}set devises(i){this.itemFacture.devises=i}navigateToDevisesCreate(){this.devisesService.returnUrl=this.router.url,this.factureService.keepData=!0,this.router.navigate(["/parametres/devises/create"]).then()}get taxe(){return this.itemFacture.taxe==null&&(this.itemFacture.taxe=new Ce),this.itemFacture.taxe}set taxe(i){this.itemFacture.taxe=i}deleteFactureProduit(i){this.itemCommande.commandeProduit=this.itemCommande.commandeProduit?.filter(t=>t!==i)}};u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=B({type:u,selectors:[["app-facture-commande"]],standalone:!0,features:[N],decls:10,vars:2,consts:[["createFrom",""],["factureProduitCreate",""],[1,"mb-3"],[1,"hstack","gap"],[1,"p-2"],[1,"p-2","ms-auto"],["cButton","","color","secondary","variant","outline","routerLink","/ventes/facture/facture",3,"click"],["cButton","","color","dark",3,"click"],["cButton","","color","primary",3,"click"],["aria-hidden","true","size","sm"],["cIcon","","name","cilPlus"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"click","routerLink"],[2,"color","#1d0528","font-family","'Times New Roman'","font-size","21px","margin-left","300px"],[1,"g-3"],["sm","4"],["cIcon","","name","cil-barcode",2,"color","blue","font-size","30px"],["cLabel","","for","code",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","code","type","text","placeholder","Code","name","code",3,"ngModelChange","ngModel"],["cIcon","","name","cil-calendar",2,"color","blue","font-size","30px"],["cLabel","","for","dateExperation",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","dateExperation","type","date","placeholder","DateExperation","name","dateExperation",3,"ngModelChange","ngModel"],["cLabel","","for","dateExpedition",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","dateExpedition","type","date","placeholder","DateExpedition","name","dateExpedition",3,"ngModelChange","ngModel"],["cIcon","","name","cil-sort-ascending",2,"color","blue","font-size","30px"],["cLabel","","for","taxe",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","taxe","name","taxe",3,"ngModelChange","ngModel"],[3,"value"],["cButton","","color","secondary","type","button","variant","outline",3,"click"],["cIcon","","name","cil-sort-descending",2,"color","blue","font-size","30px"],["cLabel","","for","rabais",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","rabais","type","number","placeholder","Rabais","name","rabais",3,"ngModelChange","ngModel"],["cIcon","","name","cil-tags",2,"color","blue","font-size","30px"],["cLabel","","for","typeRabais",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","typeRabais","name","typeRabais",3,"ngModelChange","ngModel"],["cIcon","","name","cilUser",2,"color","blue","font-size","30px"],["cLabel","","for","client",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","client","name","client",3,"ngModelChange","ngModel"],["cIcon","","name","cil-dollar",2,"color","blue","font-size","30px"],["cLabel","","for","devises",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","devises","name","devises",3,"ngModelChange","ngModel"],["align","middle","cTable","",1,"mb-0","border",3,"hover","responsive","striped"],[1,"text-nowrap","text-truncate"],[1,"bg-body-tertiary"],[1,"bg-body-tertiary",2,"display","flex","justify-content","end"],["cLabel","","for","qte",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","qte","type","number","readonly","","name","qte",3,"value"],["cLabel","","for","remiseGlobal",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","remiseGlobal","type","number","name","remiseGlobal",3,"ngModelChange","ngModel"],["cLabel","","for","stotal",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","stotal","type","number","readonly","","name","stotal",3,"value"],["cLabel","","for","total",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","total","type","number","readonly","","name","total",3,"value"],["type","number",3,"ngModelChange","min","ngModel"],["type","number",3,"ngModelChange","ngModel"],[2,"display","flex","justify-content","end"],["cButton","","color","",3,"click"],["cIcon","","name","cil-trash","size","lg"]],template:function(t,a){t&1&&(y(0,Me,16,4),E(1,0,Se),y(3,ke,1,1),E(4,3,be),y(6,De,72,17,"ng-template",null,0,R)(8,We,46,7,"ng-template",null,1,R)),t&2&&(r(),M(a.standAlon),r(3),M(!a.standAlon))},dependencies:[ce,re,me,te,oe,ae,ne,le,ie,K,I,Q,X,j,ee,A,q,U,W,P,J]});let m=u;return m})();export{nt as FactureCommandeComponent};
