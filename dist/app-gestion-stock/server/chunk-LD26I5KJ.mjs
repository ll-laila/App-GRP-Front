import './polyfills.server.mjs';
import{a as B}from"./chunk-U6GVYTTD.mjs";import{a as P}from"./chunk-GAHSYCFE.mjs";import{a as N}from"./chunk-366MMWXL.mjs";import{a as I}from"./chunk-XWMWN5XG.mjs";import{e as D,f as M}from"./chunk-GFB74FXC.mjs";import{Eb as f,Ia as C,Pb as i,Qb as o,Rb as m,Td as k,Vb as y,Wd as E,Xd as F,Yb as u,_b as p,ga as d,gb as U,hc as n,ib as s,ic as g,jb as x,jc as w,ka as v,rc as S,te as O,va as h,wa as b,yb as _}from"./chunk-VWPO2VC4.mjs";function A(r,a){if(r&1&&(i(0,"li",9),m(1,"i",10),i(2,"div")(3,"a",11),n(4,"P\xE9riode d\u2019essai"),o(),i(5,"span",12),n(6," Votre p\xE9riode d\u2019essai expirera dans "),i(7,"span",13)(8,"strong"),n(9),o()(),n(10," jours. "),m(11,"br"),n(12,"Souscrivez \xE0 un de nos abonnements. "),o(),i(13,"a",14)(14,"b"),n(15,"Param\xE8tres du compte"),o()()()()),r&2){let c=p();s(),f("ngClass","fa-info-circle w-30px m-t-5"),s(8),g(c.remade)}}function V(r,a){if(r&1){let c=y();i(0,"li",9),m(1,"i",10),i(2,"div")(3,"a",11),n(4),o(),i(5,"span",12),n(6),i(7,"span",15)(8,"a",16),u("click",function(){let e=h(c).$implicit,l=p();return b(l.goToDetails(e.employe))}),i(9,"b"),n(10),o()()()()(),i(11,"div",17)(12,"div",18)(13,"button",19),u("click",function(){let e=h(c).$implicit,l=p();return b(l.delete(e))}),m(14,"i",20),o()()()()}if(r&2){let c=a.$implicit,t=p();s(),f("ngClass",t.getNotificationIcon(c.type)+" w-30px m-t-5"),s(3),g(c.type),s(2),w(" ",c.message,", "),s(4),g(c.nomEmploye)}}var W=(()=>{let a=class a{constructor(t,e){this.notificationService=t,this.elementRef=e,this.notifications=[],this.entrepriseSelectedService=d(P),this.appUserService=d(N),this.userInfosService=d(I),this.router=d(D),this.remade=0,this.viewRemade=!1,this.isDropdownOpen=!1}ngOnInit(){this.loadNotifications(this.entrepriseSelectedService.getEntrepriseSelected()),this.getDaysRemaining(this.userInfosService.getUsername())}delete(t){this.notificationService.delete(t).subscribe(()=>{this.notifications=this.notifications.filter(e=>e.id!==t.id),console.log("Notification supprim\xE9e:",t)},e=>{console.error("Erreur lors de la suppression de la notification:",e)})}loadNotifications(t){this.notificationService.findAll(t).subscribe(e=>{this.notifications=e,console.log("Notifications charg\xE9es:",this.notifications)},e=>{console.error("Erreur lors du chargement des notifications:",e)})}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onClick(t){this.elementRef.nativeElement.contains(t.target)||(this.isDropdownOpen=!1)}getNotificationIcon(t){if(!t)return"fa-info-circle";switch(t){case"Creation d'une commande":return"fa-check-circle";case"Cadeau":return"fa-gift";case"Embauche":return"fa-plus";case"Annonce":return"fa-leaf";case"Question":return"fa-question-circle";default:return"fa-info-circle"}}getDaysRemaining(t){this.appUserService.getDaysRemaining(t).subscribe(e=>{this.remade=e.daysRemaining,console.log("remade  : ",this.remade),this.remade>0&&!e.haveSub&&(this.viewRemade=!0)},e=>{console.log(e)})}goToDetails(t){this.router.navigate(["/detailsEmploye"],{state:{employe:t}})}};a.\u0275fac=function(e){return new(e||a)(x(B),x(C))},a.\u0275cmp=v({type:a,selectors:[["app-notification"]],hostBindings:function(e,l){e&1&&u("click",function(R){return l.onClick(R)},!1,U)},standalone:!0,features:[S],decls:10,vars:2,consts:[[1,"full-page"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-12"],[1,"card"],[1,"card-body","text-center"],[1,"card-title","m-b-0"],[1,"list-style-none"],["class","d-flex no-block card-body border-top",4,"ngIf"],["class","d-flex no-block card-body border-top",4,"ngFor","ngForOf"],[1,"d-flex","no-block","card-body","border-top"],[1,"fa",3,"ngClass"],["data-abc","true",1,"m-b-0","font-medium","p-0"],[1,"text-muted"],[2,"color","#ef0a34"],["data-abc","true","routerLink","parametresCompte",1,"m-b-0","font-medium","p-0",2,"text-decoration","underline","color","#ef0a34"],[1,"font-weight-bold","employee-name",2,"text-decoration","underline","color","#673AB7"],["routerLink","detailsEmploye",3,"click"],[1,"ml-auto"],[1,"text-right"],["type","button",1,"btn","btn-light","btn-sm","rounded","mr-2",3,"click"],[1,"fas","fa-times"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),n(6,"Notifications"),o()(),i(7,"ul",6),_(8,A,16,2,"li",7)(9,V,15,4,"li",8),o()()()()()),e&2&&(s(8),f("ngIf",l.viewRemade),s(),f("ngForOf",l.notifications))},dependencies:[O,k,E,F,M],styles:['@font-face{font-family:Calibri;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/l/font?kit=J7afnpV-BGlaFfdAhLEY6w&skey=a1029226f80653a8&v=v15) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Calibri;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/l/font?kit=J7aanpV-BGlaFfdAjAo9_pxqHw&skey=cd2dd6afe6bf0eb2&v=v15) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{background-color:#d32f2f;font-family:Calibri,sans-serif!important;margin:0;padding:0;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center}.full-page[_ngcontent-%COMP%]{height:100%;width:100%}.mt-30[_ngcontent-%COMP%]{margin-top:50px}.mb-30[_ngcontent-%COMP%]{margin-bottom:50px}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0 solid transparent;border-radius:0}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1rem}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{position:relative;font-weight:700;margin-bottom:10px}ul.list-style-none[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}ul.list-style-none[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#673ab7;padding:8px 0;display:block;text-decoration:none}.m-t-5[_ngcontent-%COMP%]{margin-top:5px}.w-30px[_ngcontent-%COMP%]{width:30px}']});let r=a;return r})();export{W as a};
