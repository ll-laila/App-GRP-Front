import './polyfills.server.mjs';
import{a as he,b as ve,c as xe,d as Ce}from"./chunk-MUOL66LO.mjs";import"./chunk-OS7DLQFH.mjs";import{a as ge}from"./chunk-TCEGLAO2.mjs";import{a as fe}from"./chunk-VMQIQJK7.mjs";import{a as ue}from"./chunk-TQMIRSZL.mjs";import"./chunk-M5PYXWAU.mjs";import"./chunk-D4RJRHB5.mjs";import{a as le,b as me}from"./chunk-KUWVGZID.mjs";import{b as te,c as ie,f as ne,i as re,j as oe,k as ae,n as se}from"./chunk-MG5ECMPI.mjs";import{B as j,C as q,D as J,E as K,I as Q,M as X,N as z,T as Y,U as Z,i as L,ma as $,na as ee,o as O,p as W,r as H}from"./chunk-BJSQRMLK.mjs";import"./chunk-XR27ODAI.mjs";import{c as D}from"./chunk-TMD5LWM3.mjs";import{a as de,b as _e}from"./chunk-TJ3A5ET5.mjs";import{a as pe}from"./chunk-NLO6QWTG.mjs";import{a as ce}from"./chunk-WHNHYHSL.mjs";import"./chunk-IIYCLNRC.mjs";import"./chunk-FO7JI6NW.mjs";import"./chunk-ENKAC57S.mjs";import{e as B,f as N}from"./chunk-AO72HDTW.mjs";import"./chunk-TX6S5BIU.mjs";import"./chunk-OCP4HJ6B.mjs";import{Ab as M,Eb as c,Kb as U,Mb as k,Nb as I,Ob as F,Pb as r,Qb as o,Rb as u,Ub as y,Vb as E,Yb as f,_b as m,ga as C,gc as b,hb as s,hc as p,ic as x,jc as P,ka as R,nc as S,oc as w,pc as T,rc as G,va as d,wa as _,xa as g,xc as V,ya as v,yb as h,zb as A}from"./chunk-NYO24GET.mjs";import"./chunk-XAJIYFV3.mjs";var ye=()=>[z,import("./chunk-FBVZH4FD.mjs").then(n=>n.NgTemplateOutlet),L,N,Z,Y,$,D],Ee=()=>[import("./chunk-FBVZH4FD.mjs").then(n=>n.NgTemplateOutlet)];function be(n,l){n&1&&u(0,"c-spinner",9)}function Se(n,l){n&1&&(g(),u(0,"svg",10))}function we(n,l){n&1&&u(0,"c-spinner",9)}function Te(n,l){n&1&&(g(),u(0,"svg",12))}function Ve(n,l){n&1&&y(0)}function Ae(n,l){n&1&&y(0)}function Me(n,l){n&1&&y(0)}function Ue(n,l){if(n&1){let t=E();r(0,"c-row",3)(1,"c-nav",4)(2,"c-nav-item",5)(3,"button",6),f("click",function(){d(t);let i=m();return _(i.cancel())}),p(4,"Annuler"),o()(),r(5,"c-nav-item",7)(6,"button",8),f("click",function(){d(t);let i=m();return _(i.reset())}),h(7,be,1,0,"c-spinner",9)(8,Se,1,0,":svg:svg",10),p(9," Reset "),o()(),r(10,"c-nav-item",7)(11,"button",11),f("click",function(){d(t);let i=m();return _(i.update())}),h(12,we,1,0,"c-spinner",9)(13,Te,1,0,":svg:svg",12),p(14," Modifier "),o()()()(),h(15,Ve,1,0,"ng-container",13)(16,Ae,1,0,"ng-container",13)(17,Me,1,0,"ng-container",13)}if(n&2){let t=m(),e=b(7),i=b(9),a=b(11);s(7),U(t.resetting?7:8),s(5),U(t.sending?12:13),s(3),c("ngTemplateOutlet",e),s(),c("ngTemplateOutlet",i),s(),c("ngTemplateOutlet",a)}}function ke(n,l){n&1&&y(0)}function Ie(n,l){if(n&1&&h(0,ke,1,0,"ng-container",13),n&2){m();let t=b(7);c("ngTemplateOutlet",t)}}function Fe(n,l){if(n&1){let t=E();r(0,"c-card",3)(1,"c-card-header")(2,"strong",14),p(3,'Merci de renseigner les d\xE9tails n\xE9cessaires pour mettre \xE0 jour les informations de cet "Employe"'),o()(),r(4,"c-card-body")(5,"c-row",15)(6,"c-col",16),g(),u(7,"svg",17),v(),r(8,"label",18),p(9,"Code"),o(),r(10,"input",19),T("ngModelChange",function(i){d(t);let a=m();return w(a.item.code,i)||(a.item.code=i),_(i)}),f("blur",function(){d(t);let i=m();return _(i.validator.code.validate())}),o(),r(11,"c-form-feedback",20),p(12),o()(),r(13,"c-col",16),g(),u(14,"svg",21),v(),r(15,"label",22),p(16,"Nom "),o(),r(17,"input",23),T("ngModelChange",function(i){d(t);let a=m();return w(a.item.nom,i)||(a.item.nom=i),_(i)}),f("blur",function(){d(t);let i=m();return _(i.validator.nom.validate())}),o(),r(18,"c-form-feedback",20),p(19),o()(),r(20,"c-col",16),g(),u(21,"svg",21),v(),r(22,"label",22),p(23,"Pr\xE9nom "),o(),r(24,"input",24),T("ngModelChange",function(i){d(t);let a=m();return w(a.item.prenom,i)||(a.item.prenom=i),_(i)}),f("blur",function(){d(t);let i=m();return _(i.validator.prenom.validate())}),o(),r(25,"c-form-feedback",20),p(26),o()(),r(27,"c-col",16),g(),u(28,"svg",25),v(),r(29,"label",26),p(30,"T\xE9l\xE9phone"),o(),r(31,"input",27),T("ngModelChange",function(i){d(t);let a=m();return w(a.item.telephone,i)||(a.item.telephone=i),_(i)}),f("blur",function(){d(t);let i=m();return _(i.validator.telephone.validate())}),o(),r(32,"c-form-feedback",20),p(33),o()(),r(34,"c-col",16),g(),u(35,"svg",28),v(),r(36,"label",29),p(37,"Entreprise"),o(),r(38,"input",30),f("blur",function(){d(t);let i=m();return _(i.validator.code.validate())}),o(),r(39,"c-form-feedback",20),p(40),o()()()()()}if(n&2){let t=m();s(10),S("ngModel",t.item.code),c("valid",t.validator.code.valid),s(),c("valid",!1),s(),x(t.validator.code.message),s(5),S("ngModel",t.item.nom),c("valid",t.validator.nom.valid),s(),c("valid",!1),s(),x(t.validator.nom.message),s(5),S("ngModel",t.item.prenom),c("valid",t.validator.prenom.valid),s(),c("valid",!1),s(),x(t.validator.prenom.message),s(5),S("ngModel",t.item.telephone),c("valid",t.validator.telephone.valid),s(),c("valid",!1),s(),x(t.validator.telephone.message),s(5),c("value",t.item.entreprise==null?null:t.item.entreprise.nom)("valid",t.validator.code.valid),s(),c("valid",!1),s(),x(t.validator.code.message)}}function De(n,l){if(n&1&&(r(0,"c-card",3)(1,"c-card-header")(2,"strong"),p(3,"Adresse"),o()(),r(4,"c-card-body"),u(5,"app-adresse-update",31),o()()),n&2){let t=m();s(5),c("getter",t.adresseGetter)("setter",t.adresseSetter)("validator",t.validator.adresse)}}function Le(n,l){if(n&1){let t=E();r(0,"tr")(1,"td"),p(2),o(),r(3,"td")(4,"button",40),f("click",function(){let i=d(t).$implicit,a=m(2);return _(a.openRolesModal(i))}),g(),r(5,"svg",41),u(6,"path",42),o()()(),v(),r(7,"td")(8,"button",40),f("click",function(){let i=d(t).$implicit,a=m(2);return _(a.removeFromPermissions(i))}),g(),u(9,"svg",43),o()()()}if(n&2){let t=l.$implicit;s(2),P(" ",t.nom!=null?t.nom:"null"," ")}}function ze(n,l){if(n&1&&(r(0,"option",39),p(1),o()),n&2){let t=l.$implicit;c("ngValue",t),s(),x(t.nom)}}function Re(n,l){if(n&1){let t=E();r(0,"c-card",3)(1,"c-card-header")(2,"strong",32),p(3,"Permissions"),o()(),r(4,"c-card-body")(5,"table",33)(6,"thead",34)(7,"tr")(8,"th",35),p(9,"Entreprise"),o(),r(10,"th",35),p(11,"roles"),o(),r(12,"th",35),p(13,"\xE9liminer"),o()()(),r(14,"tbody"),I(15,Le,10,1,"tr",null,k),o()(),r(17,"app-roles-list",36),f("confirmed",function(i){d(t);let a=m();return _(a.handleRoles(i))}),o(),r(18,"c-col",37)(19,"c-input-group")(20,"select",38),f("ngModelChange",function(i){d(t);let a=m();return _(a.addToPermessions(i))}),I(21,ze,2,2,"option",39,k),o()()()()()}if(n&2){let t=m();s(5),c("hover",!0)("responsive",!0)("striped",!0),s(10),F(t.entreprisesAdroitAcces),s(2),c("permissions",t.permissions),s(4),F(t.entrepriseList)}}var pt=(()=>{let l=class l{constructor(){this.isPartOfUpdateForm=!1,this.sending=!1,this.resetting=!1,this.standAlon=!0,this.permissions=[],this.router=C(B),this.service=C(_e),this.entrepriseService=C(me),this.userInfosService=C(ce),this.entrepriseSelectedService=C(pe),this.validator=he.init(()=>this.item).setAdresse(fe.init(()=>this.adresse)),this.adresseGetter=()=>this.adresse,this.adresseSetter=e=>this.adresse=e}set setItemGetter(e){this.itemGetter=e,this.standAlon=!1}set setItemSetter(e){this.itemSetter=e}set setValidator(e){this.validator=e}ngAfterContentInit(){!this.isPartOfUpdateForm&&this.item.id==null&&this.router.navigate(["/contacts/user/employe"]).then()}ngOnInit(){this.loadEntreprise(),this.service.keepData||this.validator.reset()}loadEntreprise(){this.entrepriseService.findById(this.entrepriseSelectedService.getEntrepriseSelected()).subscribe({next:e=>{this.item.entreprise=e,console.log("entre :",this.item.entreprise)},error:e=>console.log(e)})}loadEntrepriseList(){this.entrepriseService.findByAdmin(this.userInfosService.getUsername()).subscribe(e=>{console.log(e),this.entrepriseList=e},e=>{console.log(e)})}update(){console.log(this.item),this.validator.validate()&&(this.sending=!0,this.service.update().subscribe({next:e=>{this.sending=!1,e!=null&&this.router.navigate(["/contacts/user/employe"]).then()},error:e=>{this.sending=!1,console.log(e)}}))}addToPermessions(e){this.item.entreprisesAdroitAcces==null&&(this.item.entreprisesAdroitAcces=[]),this.item.entreprisesAdroitAcces=[...this.item.entreprisesAdroitAcces,e],console.log(this.item.entreprisesAdroitAcces)}removeFromPermissions(e){this.item.entreprisesAdroitAcces=this.item.entreprisesAdroitAcces?.filter(i=>i!==e)}openRolesModal(e){this.selectedEntreprise=e;let i=document.getElementById("confirmationModal");i&&new ve(i).show()}handleRoles(e){this.permissions=e,this.item.permissionsAcces=this.permissions.map(i=>{let a=new Ce;return a.nom=i.nom,a.etat=i.etat,a.entrepriseId=this.selectedEntreprise.id,a})}reset(){this.resetting=!0,this.service.findById(this.item.id).subscribe({next:e=>{this.item=e,this.validator.reset(),this.resetting=!1},error:e=>{console.log(e),this.resetting=!1}})}get entreprisesAdroitAcces(){return this.item.entreprisesAdroitAcces==null&&(this.item.entreprisesAdroitAcces=[]),this.item.entreprisesAdroitAcces}set entreprisesAdroitAcces(e){this.item.entreprisesAdroitAcces=e}get permissionsAcces(){return this.item.permissionsAcces==null&&(this.item.permissionsAcces=[]),this.item.permissionsAcces}set permissionsAcces(e){this.item.permissionsAcces=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.itemGetter()}set item(e){this.itemSetter(e)}itemGetter(){return this.service.item}itemSetter(e){this.service.item=e}get adresse(){return this.item.adresse==null&&(this.item.adresse=new ue),this.item.adresse}set adresse(e){this.item.adresse=e}get entreprise(){return this.item.entreprise==null&&(this.item.entreprise=new le),this.item.entreprise}set entreprise(e){this.item.entreprise=e}navigateToEntrepriseCreate(){this.entrepriseService.returnUrl=this.router.url,this.router.navigate(["/parametres/entreprise/create"]).then()}cancel(){this.item=new de}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=R({type:l,selectors:[["app-employe-update"]],inputs:{setItemGetter:[0,"getter","setItemGetter"],setItemSetter:[0,"setter","setItemSetter"],setValidator:[0,"validator","setValidator"],permissions:"permissions"},standalone:!0,features:[G],decls:12,vars:2,consts:[["createFrom",""],["createSubEntities",""],["permission",""],[1,"mb-3"],[1,"hstack","gap"],[1,"p-2","ms-auto"],["cButton","","color","secondary","variant","outline","routerLink","/contacts/user/employe",3,"click"],[1,"p-2"],["cButton","","color","dark",3,"click"],["aria-hidden","true","size","sm"],["cIcon","","name","cilReload"],["cButton","","color","primary",3,"click"],["cIcon","","name","cilPen"],[4,"ngTemplateOutlet"],[1,"responsive-header",2,"color","#1d0528","font-family","'Times New Roman'","font-size","21px","margin-left","300px"],[1,"g-3"],["sm","4"],["cIcon","","name","cil-barcode",2,"color","blue","font-size","30px"],["cLabel","","for","code",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","code","type","text","placeholder","Code","name","code",3,"ngModelChange","blur","ngModel","valid"],[3,"valid"],["cIcon","","name","cilUser",2,"color","blue","font-size","30px"],["cLabel","","for","nom",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","nom","type","text","placeholder","Nom","name","nom",3,"ngModelChange","blur","ngModel","valid"],["cFormControl","","id","prenom","type","text","placeholder","Prenom","name","prenom",3,"ngModelChange","blur","ngModel","valid"],["cIcon","","name","cil-phone",2,"color","blue","font-size","30px"],["cLabel","","for","telephone",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","telephone","type","text","placeholder","Telephone","name","telephone",3,"ngModelChange","blur","ngModel","valid"],["cIcon","","name","cil-building",2,"color","blue","font-size","30px"],["cLabel","","for","entreprise",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","entreprise","type","text","name","entreprise","disabled","true",3,"blur","value","valid"],[3,"getter","setter","validator"],[2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["align","middle","cTable","",1,"mb-0","border",3,"hover","responsive","striped"],[1,"text-nowrap","text-truncate"],[1,"bg-body-tertiary"],[3,"confirmed","permissions"],["sm","3",1,"mt-3"],["cSelect","","ngModel","",3,"ngModelChange"],[3,"ngValue"],["cButton","","color","",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-ui-checks-grid"],["d","M2 10h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1m9-9h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 9a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zm0-10a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM2 9a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm7 2a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-3a2 2 0 0 1-2-2zM0 2a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm5.354.854a.5.5 0 1 0-.708-.708L3 3.793l-.646-.647a.5.5 0 1 0-.708.708l1 1a.5.5 0 0 0 .708 0z"],["cIcon","","name","cil-trash","size","lg"]],template:function(i,a){i&1&&(h(0,Ue,18,5),A(1,0,ye),h(3,Ie,1,1),A(4,3,Ee),h(6,Fe,41,20,"ng-template",null,0,V)(8,De,6,3,"ng-template",null,1,V)(10,Re,23,4,"ng-template",null,2,V)),i&2&&(s(),M(a.standAlon),s(3),M(!a.standAlon))},dependencies:[J,z,X,Q,se,oe,ae,te,re,ie,ne,K,O,W,H,q,L,j,D,ge,xe,ee],styles:['@charset "UTF-8";.responsive-header[_ngcontent-%COMP%]{font-family:Times New Roman;font-size:21px;margin-left:300px}@media (max-width: 1024px){.responsive-header[_ngcontent-%COMP%]{font-size:18px;margin-left:100px}}@media (max-width: 768px){.responsive-header[_ngcontent-%COMP%]{font-size:16px;margin-left:50px;text-align:center}}@media (max-width: 480px){.responsive-header[_ngcontent-%COMP%]{font-size:14px;margin-left:20px;text-align:center}}']});let n=l;return n})();export{pt as EmployeUpdateComponent};
