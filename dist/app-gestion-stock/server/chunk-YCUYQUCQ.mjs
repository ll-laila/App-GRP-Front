import './polyfills.server.mjs';
import{a as ve}from"./chunk-LSOUTZ6Z.mjs";import{a as ue,b as de}from"./chunk-REEX6EVL.mjs";import{a as S,b as pe}from"./chunk-AHRJE2FH.mjs";import"./chunk-D4RJRHB5.mjs";import{a as ee}from"./chunk-GYJGDPFA.mjs";import{a as le,b as ce}from"./chunk-KUWVGZID.mjs";import{b as te,c as ie,f as ne,i as re,j as oe,k as se,n as ae}from"./chunk-MG5ECMPI.mjs";import{B as j,C as q,D as J,E as K,I as Q,M as X,N as L,T as Y,U as Z,i as I,ma as $,o as W,p as P,r as H}from"./chunk-BJSQRMLK.mjs";import"./chunk-XR27ODAI.mjs";import{c as F}from"./chunk-TMD5LWM3.mjs";import{a as me}from"./chunk-NLO6QWTG.mjs";import"./chunk-FO7JI6NW.mjs";import"./chunk-ENKAC57S.mjs";import{e as B,f as U}from"./chunk-AO72HDTW.mjs";import"./chunk-TX6S5BIU.mjs";import"./chunk-OCP4HJ6B.mjs";import{Ab as b,Eb as v,Kb as T,Mb as O,Nb as R,Ob as z,Pb as r,Qb as a,Rb as h,Ub as y,Vb as x,Yb as _,_b as l,ga as f,gc as k,hb as s,hc as c,ic as D,ka as N,nc as V,oc as E,pc as M,rc as A,va as m,wa as p,xa as C,xc as G,ya as g,yb as d,zb as w}from"./chunk-NYO24GET.mjs";import"./chunk-XAJIYFV3.mjs";var _e=()=>[L,import("./chunk-FBVZH4FD.mjs").then(t=>t.NgTemplateOutlet),I,U,Z,Y,$,F],fe=()=>[import("./chunk-FBVZH4FD.mjs").then(t=>t.NgTemplateOutlet)];function he(t,o){if(t&1){let i=x();r(0,"c-nav-item",3)(1,"button",11),_("click",function(){m(i);let n=l(2);return p(n.retour())}),c(2,"Return"),a()()}if(t&2){let i=l(2);s(),v("routerLink",i.returnUrl)}}function Ce(t,o){t&1&&h(0,"c-spinner",8)}function ge(t,o){t&1&&(C(),h(0,"svg",9))}function xe(t,o){t&1&&y(0)}function De(t,o){if(t&1){let i=x();r(0,"c-row",1)(1,"c-nav",2),d(2,he,3,1,"c-nav-item",3),r(3,"c-nav-item",4)(4,"button",5),_("click",function(){m(i);let n=l();return p(n.cancel())}),c(5,"Annuler"),a()(),r(6,"c-nav-item",3)(7,"button",6),_("click",function(){m(i);let n=l();return p(n.reset())}),c(8,"R\xE9initialiser"),a()(),r(9,"c-nav-item",3)(10,"button",7),_("click",function(){m(i);let n=l();return p(n.create())}),d(11,Ce,1,0,"c-spinner",8)(12,ge,1,0,":svg:svg",9),c(13," Cr\xE9er "),a()()()(),d(14,xe,1,0,"ng-container",10)}if(t&2){let i=l(),e=k(7);s(2),T(i.toReturn?2:-1),s(9),T(i.sending?11:12),s(3),v("ngTemplateOutlet",e)}}function Se(t,o){t&1&&y(0)}function we(t,o){if(t&1&&d(0,Se,1,0,"ng-container",10),t&2){l();let i=k(7);v("ngTemplateOutlet",i)}}function be(t,o){if(t&1&&(r(0,"option",20),c(1),a()),t&2){let i=o.$implicit;v("value",i.id),s(),D(i.labelle)}}function Te(t,o){if(t&1){let i=x();r(0,"c-card",1)(1,"c-card-header")(2,"strong",12),c(3,'Veuillez remplir les informations ci-dessous pour cr\xE9er un nouveau "Devise"'),a()(),r(4,"c-card-body")(5,"c-row",13)(6,"c-col",14),C(),h(7,"svg",15),g(),r(8,"label",16),c(9,"Taux de change au MAD"),a(),r(10,"input",17),M("ngModelChange",function(n){m(i);let u=l();return E(u.item.tauxDeChange,n)||(u.item.tauxDeChange=n),p(n)}),_("blur",function(){m(i);let n=l();return p(n.validator.tauxDeChange.validate())}),a(),r(11,"c-form-feedback",18),c(12),a()(),r(13,"c-col",14),C(),h(14,"svg",15),g(),r(15,"label",16),c(16,"Nouvelle devise"),a(),r(17,"c-input-group")(18,"select",19),M("ngModelChange",function(n){m(i);let u=l();return E(u.nouvelleDevise.id,n)||(u.nouvelleDevise.id=n),p(n)}),_("blur",function(){m(i);let n=l();return p(n.validator.nouvelleDevise.validate())}),R(19,be,2,2,"option",20,O),a(),r(21,"button",21),_("click",function(){m(i);let n=l();return p(n.navigateToNouvelleDeviseCreate())}),C(),h(22,"svg",9),a(),g(),r(23,"c-form-feedback",18),c(24),a()()()()()()}if(t&2){let i=l();s(10),V("ngModel",i.item.tauxDeChange),v("valid",i.validator.tauxDeChange.valid),s(),v("valid",!1),s(),D(i.validator.tauxDeChange.message),s(6),V("ngModel",i.nouvelleDevise.id),v("valid",i.validator.nouvelleDevise.valid),s(),z(i.nouvelleDeviseList),s(4),v("valid",!1),s(),D(i.validator.nouvelleDevise.message)}}var Ke=(()=>{let o=class o{constructor(){this.sending=!1,this.standAlon=!0,this.router=f(B),this.service=f(pe),this.nouvelleDeviseService=f(de),this.entrepriseService=f(ce),this.toasterService=f(ee),this.entrepriseSelectedService=f(me),this.validator=ve.init(()=>this.item)}set setItemGetter(e){this.itemGetter=e,this.standAlon=!1}set setItemSetter(e){this.itemSetter=e}set setValidator(e){this.validator=e}ngOnInit(){if(this.service.keepData){let e=this.nouvelleDeviseService.createdItemAfterReturn;e.created&&(this.item.nouvelleDevise=e.item,this.validator.nouvelleDevise.validate())}else this.reset(!1);this.service.keepData=!1,this.loadNouvelleDeviseList(),this.loadEntrepriseList()}loadNouvelleDeviseList(){this.nouvelleDeviseService.findAllOptimized().subscribe({next:e=>this.nouvelleDeviseList=e,error:e=>console.log(e)})}loadEntrepriseList(){this.entrepriseService.findAllOptimized().subscribe({next:e=>this.entrepriseList=e,error:e=>console.log(e)})}create(){console.log(this.item),this.validator.validate()&&(this.sending=!0,this.item.idEntreprise=this.entrepriseSelectedService.getEntrepriseSelected(),this.service.create().subscribe({next:e=>{if(this.sending=!1,e!=null){if(this.toReturn){this.item=e,this.router.navigate([this.returnUrl]).then();return}this.item=new S,this.router.navigate(["/parametres/devises"]).then(),this.toasterService.toast({message:"Un nouveau devise a \xE9t\xE9 ajout\xE9",color:"success"})}},error:e=>{this.sending=!1,console.log(e),this.validator.import(e.error)}}))}reset(e=!0){(e||this.item==null)&&(this.item=new S),this.validator.reset()}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.itemGetter()}set item(e){this.itemSetter(e)}itemGetter(){return this.service.item}itemSetter(e){this.service.item=e}get nouvelleDevise(){return this.item.nouvelleDevise==null&&(this.item.nouvelleDevise=new ue),this.item.nouvelleDevise}set nouvelleDevise(e){this.item.nouvelleDevise=e}get entreprise(){return this.item.entreprise==null&&(this.item.entreprise=new le),this.item.entreprise}set entreprise(e){this.item.entreprise=e}get returnUrl(){return this.service.returnUrl}get toReturn(){return this.service.toReturn()}navigateToNouvelleDeviseCreate(){this.nouvelleDeviseService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/parametres/nouvelle-devise/create"]).then()}navigateToEntrepriseCreate(){this.entrepriseService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/parametres/entreprise/create"]).then()}cancel(){this.item=new S}retour(){this.router.navigate(["/pays/pays/list"]).then()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=N({type:o,selectors:[["app-devises-create"]],inputs:{setItemGetter:[0,"getter","setItemGetter"],setItemSetter:[0,"setter","setItemSetter"],setValidator:[0,"validator","setValidator"]},standalone:!0,features:[A],decls:8,vars:2,consts:[["createFrom",""],[1,"mb-3"],[1,"hstack","gap"],[1,"p-2"],[1,"p-2","ms-auto"],["cButton","","color","secondary","variant","outline","routerLink","/parametres/devises",3,"click"],["cButton","","color","dark",3,"click"],["cButton","","color","primary",3,"click"],["aria-hidden","true","size","sm"],["cIcon","","name","cilPlus"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"click","routerLink"],[1,"responsive-header",2,"color","#1d0528","font-family","'Times New Roman'","font-size","21px","margin-left","300px"],[1,"g-3"],["sm","4"],["cIcon","","name","cil-barcode",2,"color","blue","font-size","30px"],["cLabel","",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","tauxDeChange","name","tauxDeChange",3,"ngModelChange","blur","ngModel","valid"],[3,"valid"],["cSelect","","id","nouvelleDevise","name","nouvelleDevise",3,"ngModelChange","blur","ngModel","valid"],[3,"value"],["cButton","","color","secondary","type","button","variant","outline",3,"click"]],template:function(n,u){n&1&&(d(0,De,15,3),w(1,0,_e),d(3,we,1,1),w(4,3,fe),d(6,Te,25,8,"ng-template",null,0,G)),n&2&&(s(),b(u.standAlon),s(3),b(!u.standAlon))},dependencies:[J,L,X,Q,ae,oe,se,te,re,ie,ne,K,W,P,H,q,I,F,j],styles:['@charset "UTF-8";.responsive-header[_ngcontent-%COMP%]{font-family:Times New Roman;font-size:21px;margin-left:300px}@media (max-width: 1024px){.responsive-header[_ngcontent-%COMP%]{font-size:18px;margin-left:100px}}@media (max-width: 768px){.responsive-header[_ngcontent-%COMP%]{font-size:16px;margin-left:50px;text-align:center}}@media (max-width: 480px){.responsive-header[_ngcontent-%COMP%]{font-size:14px;margin-left:20px;text-align:center}}']});let t=o;return t})();export{Ke as DevisesCreateComponent};
