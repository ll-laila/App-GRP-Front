import{a as we}from"./chunk-KW3RL3BA.js";import{a as be}from"./chunk-UX5XNLU2.js";import{a as Se}from"./chunk-AR4GS4HJ.js";import"./chunk-AQJASJLD.js";import"./chunk-PWZLSYGI.js";import{a as G}from"./chunk-4PB5XBEU.js";import{b as ge}from"./chunk-E3QTV3JX.js";import{a as xe,b as fe}from"./chunk-TCO3KLXK.js";import{a as Ce,b as he}from"./chunk-XYVWMYTK.js";import"./chunk-SR3OXJX3.js";import{a as ve}from"./chunk-KVOQTR2V.js";import{a as V,b as _e}from"./chunk-4Y77KYTJ.js";import{a as pe,b as ue}from"./chunk-NU2X4KO5.js";import{b as te,c as ie,f as ne,h as re,i as oe,j as ae,k as le,n as se}from"./chunk-C5NPBRNY.js";import{a as ce,b as me}from"./chunk-E4IVXHC4.js";import{$,I as j,J,K,L as Q,P as X,T as Y,U as W,_ as Z,p as N,ta as ee,v as O,w as U,y as q}from"./chunk-EEWOCATZ.js";import{c as D}from"./chunk-4DTSML7Z.js";import{a as de}from"./chunk-4FWJZSCC.js";import{d as z,e as H}from"./chunk-7D4QPVHB.js";import"./chunk-2BQUVQN4.js";import"./chunk-RTZTBWEW.js";import"./chunk-3HUUSNPM.js";import"./chunk-H2QFYA5F.js";import{Cb as m,Ib as L,Kb as y,Lb as k,Mb as T,Nb as n,Ob as r,Pb as _,Sb as I,Tb as P,Wb as v,Yb as c,ec as F,fb as o,fc as s,ga as b,gc as f,ka as B,lc as C,mc as h,nc as S,pc as R,va as d,vc as A,wa as p,wb as w,xa as x,xb as M,ya as g,yb as E}from"./chunk-4HLAVBW4.js";import"./chunk-RGL3W33T.js";var ye=()=>[W,import("./chunk-CYWVAYB3.js").then(l=>l.NgTemplateOutlet),N,H,$,Z,ee,D],ke=()=>[import("./chunk-CYWVAYB3.js").then(l=>l.NgTemplateOutlet)];function Te(l,u){if(l&1){let e=P();n(0,"c-nav-item",3)(1,"button",11),v("click",function(){d(e);let t=c(2);return p(t.retour())}),s(2,"Return"),r()()}if(l&2){let e=c(2);o(),m("routerLink",e.returnUrl)}}function Pe(l,u){l&1&&_(0,"c-spinner",8)}function Ve(l,u){l&1&&(x(),_(0,"svg",9))}function Me(l,u){l&1&&I(0)}function Ee(l,u){if(l&1){let e=P();n(0,"c-row",1)(1,"c-nav",2),w(2,Te,3,1,"c-nav-item",3),n(3,"c-nav-item",4)(4,"button",5),v("click",function(){d(e);let t=c();return p(t.cancel())}),s(5,"Cancel"),r()(),n(6,"c-nav-item",3)(7,"button",6),v("click",function(){d(e);let t=c();return p(t.reset())}),s(8,"Reset"),r()(),n(9,"c-nav-item",3)(10,"button",7),v("click",function(){d(e);let t=c();return p(t.create())}),w(11,Pe,1,0,"c-spinner",8)(12,Ve,1,0,":svg:svg",9),s(13," Create "),r()()()(),w(14,Me,1,0,"ng-container",10)}if(l&2){let e=c(),i=F(7);o(2),L(e.toReturn?2:-1),o(9),L(e.sending?11:12),o(3),m("ngTemplateOutlet",i)}}function Le(l,u){l&1&&I(0)}function Ie(l,u){if(l&1&&w(0,Le,1,0,"ng-container",10),l&2){c();let e=F(7);m("ngTemplateOutlet",e)}}function Fe(l,u){if(l&1&&(n(0,"option",36),s(1),r()),l&2){let e=u.$implicit;m("value",e.id),o(),f(e.nouvelleDevise==null?null:e.nouvelleDevise.labelle)}}function De(l,u){if(l&1&&(n(0,"option",36),s(1),r()),l&2){let e=u.$implicit;m("value",e.id),o(),f(e.nom)}}function Ne(l,u){if(l&1&&(n(0,"option",36),s(1),r()),l&2){let e=u.$implicit;m("value",e.id),o(),f(e.nom)}}function We(l,u){if(l&1){let e=P();n(0,"c-col",14)(1,"label",47),s(2),r(),n(3,"input",48),S("ngModelChange",function(t){let a=d(e).$implicit;return h(a.prix,t)||(a.prix=t),p(t)}),r()()}if(l&2){let e=u.$implicit;o(2),f(e.niveauPrix==null?null:e.niveauPrix.nom),o(),m("placeholder",e.niveauPrix==null?null:e.niveauPrix.nom),C("ngModel",e.prix)}}function Ge(l,u){if(l&1){let e=P();n(0,"c-col",14)(1,"label",47),s(2),r(),n(3,"input",48),S("ngModelChange",function(t){let a=d(e).$implicit;return h(a.prix,t)||(a.prix=t),p(t)}),r()()}if(l&2){let e=u.$implicit;o(2),f(e.niveauPrix==null?null:e.niveauPrix.nom),o(),m("placeholder",e.niveauPrix==null?null:e.niveauPrix.nom),C("ngModel",e.prix)}}function Be(l,u){if(l&1){let e=P();n(0,"c-card",1)(1,"c-card-header")(2,"strong",12),s(3,'Veuillez remplir les informations ci-dessous pour cr\xE9er un nouveau "produit"'),r()(),n(4,"c-card-body")(5,"c-row",13)(6,"c-col",14),x(),_(7,"svg",15),g(),n(8,"label",16),s(9,"Nom"),r(),n(10,"input",17),S("ngModelChange",function(t){d(e);let a=c();return h(a.item.nom,t)||(a.item.nom=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.nom.validate())}),r(),n(11,"c-form-feedback",18),s(12),r()(),n(13,"c-col",14),x(),_(14,"svg",19),g(),n(15,"label",20),s(16,"Sku"),r(),n(17,"input",21),S("ngModelChange",function(t){d(e);let a=c();return h(a.item.sku,t)||(a.item.sku=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.sku.validate())}),r(),n(18,"c-form-feedback",18),s(19),r()(),n(20,"c-col",14),x(),_(21,"svg",19),g(),n(22,"label",22),s(23,"Code \xE0 barre"),r(),n(24,"input",23),S("ngModelChange",function(t){d(e);let a=c();return h(a.item.barcode,t)||(a.item.barcode=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.barcode.validate())}),r(),n(25,"c-form-feedback",18),s(26),r()(),n(27,"c-col",14),x(),_(28,"svg",24),g(),n(29,"label",25),s(30,"Niveau de stock initial"),r(),n(31,"input",26),S("ngModelChange",function(t){d(e);let a=c();return h(a.item.niveauStockInitial,t)||(a.item.niveauStockInitial=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.niveauStockInitial.validate())}),r(),n(32,"c-form-feedback",18),s(33),r()(),n(34,"c-col",14),x(),_(35,"svg",24),g(),n(36,"label",27),s(37,"Point Commande"),r(),n(38,"input",28),S("ngModelChange",function(t){d(e);let a=c();return h(a.item.pointCommande,t)||(a.item.pointCommande=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.pointCommande.validate())}),r(),n(39,"c-form-feedback",18),s(40),r()(),n(41,"c-col",14),x(),_(42,"svg",24),g(),n(43,"label",29),s(44,"Prix r\xE9gulier"),r(),n(45,"input",30),S("ngModelChange",function(t){d(e);let a=c();return h(a.item.prixGros,t)||(a.item.prixGros=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.prixGros.validate())}),r(),n(46,"c-form-feedback",18),s(47),r()(),n(48,"c-col",14),x(),_(49,"svg",24),g(),n(50,"label",31),s(51,"PrixAchat"),r(),n(52,"input",32),S("ngModelChange",function(t){d(e);let a=c();return h(a.item.prixAchat,t)||(a.item.prixAchat=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.prixAchat.validate())}),r(),n(53,"c-form-feedback",18),s(54),r()(),n(55,"c-col",14),x(),_(56,"svg",33),g(),n(57,"label",34),s(58,"Devise"),r(),n(59,"c-input-group")(60,"select",35),S("ngModelChange",function(t){d(e);let a=c();return h(a.devises.id,t)||(a.devises.id=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.devises.validate())}),k(61,Fe,2,2,"option",36,y),r(),n(63,"button",37),v("click",function(){d(e);let t=c();return p(t.navigateToDevisesCreate())}),x(),_(64,"svg",9),r(),g(),n(65,"c-form-feedback",18),s(66),r()()(),n(67,"c-col",14),x(),_(68,"svg",38),g(),n(69,"label",39),s(70,"Entreprise"),r(),_(71,"input",40)(72,"c-form-feedback",18),r(),n(73,"c-col",14),x(),_(74,"svg",41),g(),n(75,"label",42),s(76,"Taxe"),r(),n(77,"c-input-group")(78,"select",43),S("ngModelChange",function(t){d(e);let a=c();return h(a.taxe.id,t)||(a.taxe.id=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.taxe.validate())}),k(79,De,2,2,"option",36,y),r(),n(81,"button",37),v("click",function(){d(e);let t=c();return p(t.navigateToTaxeCreate())}),x(),_(82,"svg",9),r(),g(),n(83,"c-form-feedback",18),s(84),r()()(),n(85,"c-col",14),x(),_(86,"svg",44),g(),n(87,"label",45),s(88,"Fournisseur"),r(),n(89,"c-input-group")(90,"select",46),S("ngModelChange",function(t){d(e);let a=c();return h(a.fournisseur.id,t)||(a.fournisseur.id=t),p(t)}),v("blur",function(){d(e);let t=c();return p(t.validator.fournisseur.validate())}),k(91,Ne,2,2,"option",36,y),r(),n(93,"button",37),v("click",function(){d(e);let t=c();return p(t.navigateToFournisseurCreate())}),x(),_(94,"svg",9),r(),g(),n(95,"c-form-feedback",18),s(96),r()()()()()(),n(97,"c-card",1)(98,"c-card-header")(99,"strong"),s(100,"Niveau de prix des achats"),r()(),n(101,"c-card-body")(102,"c-row",13),k(103,We,4,3,"c-col",14,y),r()()(),n(105,"c-card",1)(106,"c-card-header")(107,"strong"),s(108,"Niveau de prix des ventes "),r()(),n(109,"c-card-body")(110,"c-row",13),k(111,Ge,4,3,"c-col",14,y),r()()()}if(l&2){let e=c();o(10),C("ngModel",e.item.nom),m("valid",e.validator.nom.valid),o(),m("valid",!1),o(),f(e.validator.nom.message),o(5),C("ngModel",e.item.sku),m("valid",e.validator.sku.valid),o(),m("valid",!1),o(),f(e.validator.sku.message),o(5),C("ngModel",e.item.barcode),m("valid",e.validator.barcode.valid),o(),m("valid",!1),o(),f(e.validator.barcode.message),o(5),C("ngModel",e.item.niveauStockInitial),m("valid",e.validator.niveauStockInitial.valid),o(),m("valid",!1),o(),f(e.validator.niveauStockInitial.message),o(5),C("ngModel",e.item.pointCommande),m("valid",e.validator.pointCommande.valid),o(),m("valid",!1),o(),f(e.validator.pointCommande.message),o(5),C("ngModel",e.item.prixGros),m("valid",e.validator.prixGros.valid),o(),m("valid",!1),o(),f(e.validator.prixGros.message),o(5),C("ngModel",e.item.prixAchat),m("valid",e.validator.prixAchat.valid),o(),m("valid",!1),o(),f(e.validator.prixAchat.message),o(6),C("ngModel",e.devises.id),m("valid",e.validator.devises.valid),o(),T(e.devisesList),o(4),m("valid",!1),o(),f(e.validator.devises.message),o(5),m("value",e.item.entreprise==null?null:e.item.entreprise.nom),o(),m("valid",!1),o(6),C("ngModel",e.taxe.id),m("valid",e.validator.taxe.valid),o(),T(e.taxeList),o(4),m("valid",!1),o(),f(e.validator.taxe.message),o(6),C("ngModel",e.fournisseur.id),m("valid",e.validator.fournisseur.valid),o(),T(e.fournisseurList),o(4),m("valid",!1),o(),f(e.validator.fournisseur.message),o(7),T(e.filterProduitNivquxPrix(e.StatutNiveauPrixEnum.ACHAT)),o(8),T(e.filterProduitNivquxPrix(e.StatutNiveauPrixEnum.VENTE))}}var ft=(()=>{let u=class u{constructor(){this.sending=!1,this.standAlon=!0,this.router=b(z),this.service=b(_e),this.devisesService=b(fe),this.taxeService=b(he),this.fournisseurService=b(ue),this.entrepriseService=b(me),this.niveauPrixService=b(ge),this.toasterService=b(ve),this.entrepriseSelectedService=b(de),this.validator=Se.init(()=>this.item),this.niveauStockGetter=()=>this.niveauStock,this.niveauStockSetter=i=>this.niveauStock=i,this.StatutNiveauPrixEnum=we}set setItemGetter(i){this.itemGetter=i,this.standAlon=!1}set setItemSetter(i){this.itemSetter=i}set setValidator(i){this.validator=i}ngOnInit(){if(this.loadEntreprise(),this.service.keepData){let i=this.devisesService.createdItemAfterReturn;i.created&&(this.item.devises=i.item,this.validator.devises.validate());let t=this.taxeService.createdItemAfterReturn;t.created&&(this.item.taxe=t.item,this.validator.taxe.validate());let a=this.fournisseurService.createdItemAfterReturn;a.created&&(this.item.fournisseur=a.item,this.validator.fournisseur.validate())}else this.reset(!1);this.service.keepData=!1,this.item.niveauStock=new G,this.niveauPrixService.findByEntrepriseId(this.entrepriseSelectedService.getEntrepriseSelected()).subscribe({next:i=>{this.item.produitNiveauPrix=i.map(t=>{let a=new be;return a.niveauPrix=t,a})}}),this.loadDevisesList(),this.loadTaxeList(),this.loadFournisseurList(),this.loadEntrepriseList()}loadEntreprise(){this.entrepriseService.findById(this.entrepriseSelectedService.getEntrepriseSelected()).subscribe({next:i=>{this.item.entreprise=i,console.log("entre :",this.item.entreprise)},error:i=>console.log(i)})}loadDevisesList(){this.devisesService.findByEntrepriseId(this.entrepriseSelectedService.getEntrepriseSelected()).subscribe({next:i=>{this.devisesList=i,console.log("devises List :",i)},error:i=>console.log(i)})}loadTaxeList(){this.taxeService.findAllOptimized().subscribe({next:i=>this.taxeList=i,error:i=>console.log(i)})}loadFournisseurList(){this.fournisseurService.getFournisseurs(this.entrepriseSelectedService.getEntrepriseSelected()).subscribe({next:i=>{this.fournisseurList=i},error:i=>console.log(i)})}loadEntrepriseList(){this.entrepriseService.findAllOptimized().subscribe({next:i=>this.entrepriseList=i,error:i=>console.log(i)})}create(){if(this.item.disponible=this.item.niveauStockInitial,console.log(this.item),!this.validator.validate()){console.log(this.validator);return}this.sending=!0,this.service.create().subscribe({next:i=>{if(this.sending=!1,i!=null){if(this.toReturn){this.item=i,this.router.navigate([this.returnUrl]).then();return}this.item=new V,this.router.navigate(["/produit/produit"]).then(),this.toasterService.toast({message:"Un nouveau produit a \xE9t\xE9 ajout\xE9",color:"success"})}},error:i=>{this.sending=!1,console.log(i),this.validator.import(i.error)}})}reset(i=!0){(i||this.item==null)&&(this.item=new V),this.validator.reset()}get items(){return this.service.items}set items(i){this.service.items=i}get item(){return this.itemGetter()}set item(i){this.itemSetter(i)}itemGetter(){return this.service.item}itemSetter(i){this.service.item=i}get niveauStock(){return this.item.niveauStock==null&&(this.item.niveauStock=new G),this.item.niveauStock}set niveauStock(i){this.item.niveauStock=i}get devises(){return this.item.devises==null&&(this.item.devises=new xe),this.item.devises}set devises(i){this.item.devises=i}get taxe(){return this.item.taxe==null&&(this.item.taxe=new Ce),this.item.taxe}set taxe(i){this.item.taxe=i}get fournisseur(){return this.item.fournisseur==null&&(this.item.fournisseur=new pe),this.item.fournisseur}set fournisseur(i){this.item.fournisseur=i}get entreprise(){return this.item.entreprise==null&&(this.item.entreprise=new ce),this.item.entreprise}set entreprise(i){this.item.entreprise=i}get returnUrl(){return this.service.returnUrl}get toReturn(){return this.service.toReturn()}navigateToDevisesCreate(){this.devisesService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/parametres/devises/create"]).then()}navigateToTaxeCreate(){this.taxeService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/parametres/taxe/create"]).then()}navigateToFournisseurCreate(){this.fournisseurService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/contacts/fournisseur/create"]).then()}navigateToEntrepriseCreate(){this.entrepriseService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/parametres/entreprise/create"]).then()}cancel(){this.item=new V}retour(){this.router.navigate(["/pays/pays/list"]).then()}filterProduitNivquxPrix(i){return this.item.produitNiveauPrix?.filter(t=>t.niveauPrix?.type==i)||[]}};u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=B({type:u,selectors:[["app-produit-create"]],inputs:{setItemGetter:[0,"getter","setItemGetter"],setItemSetter:[0,"setter","setItemSetter"],setValidator:[0,"validator","setValidator"]},standalone:!0,features:[R],decls:8,vars:2,consts:[["createFrom",""],[1,"mb-3"],[1,"hstack","gap"],[1,"p-2"],[1,"p-2","ms-auto"],["cButton","","color","secondary","variant","outline","routerLink","/produit/produit",3,"click"],["cButton","","color","dark",3,"click"],["cButton","","color","primary",3,"click"],["aria-hidden","true","size","sm"],["cIcon","","name","cilPlus"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"click","routerLink"],[2,"color","#1d0528","font-family","'Times New Roman'","font-size","21px","margin-left","300px"],[1,"g-3"],["sm","4"],["cIcon","","name","cib-codepen",2,"color","blue","font-size","30px"],["cLabel","","for","nom",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","nom","type","text","name","nom",3,"ngModelChange","blur","ngModel","valid"],[3,"valid"],["cIcon","","name","cil-barcode",2,"color","blue","font-size","30px"],["cLabel","","for","sku",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","sku","type","text","name","sku",3,"ngModelChange","blur","ngModel","valid"],["cLabel","","for","barcode",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","barcode","type","text","name","barcode",3,"ngModelChange","blur","ngModel","valid"],["cIcon","","name","cil-ruble",2,"color","blue","font-size","30px"],["cLabel","","for","niveauStockInitial",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","niveauStockInitial","type","number","name","niveauStockInitial",3,"ngModelChange","blur","ngModel","valid"],["cLabel","","for","pointCommande",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","pointCommande","type","number","name","pointCommande",3,"ngModelChange","blur","ngModel","valid"],["cLabel","","for","prixGros",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","prixGros","type","number","name","prixGros",3,"ngModelChange","blur","ngModel","valid"],["cLabel","","for","prixAchat",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","prixAchat","type","number","name","prixAchat",3,"ngModelChange","blur","ngModel","valid"],["cIcon","","name","cil-dollar",2,"color","blue","font-size","30px"],["cLabel","","for","devises",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","devises","name","devises",3,"ngModelChange","blur","ngModel","valid"],[3,"value"],["cButton","","color","secondary","type","button","variant","outline",3,"click"],["cIcon","","name","cil-building",2,"color","blue","font-size","30px"],["cLabel","","for","entreprise",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","entreprise","type","text","name","entreprise","disabled","true",3,"value"],["cIcon","","name","cil-sort-ascending",2,"color","blue","font-size","30px"],["cLabel","","for","taxe",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","taxe","name","taxe",3,"ngModelChange","blur","ngModel","valid"],["cIcon","","name","cilUser",2,"color","blue","font-size","30px"],["cLabel","","for","fournisseur",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","fournisseur","name","fournisseur",3,"ngModelChange","blur","ngModel","valid"],["cLabel",""],["cFormControl","","type","number",3,"ngModelChange","placeholder","ngModel"]],template:function(t,a){t&1&&(w(0,Ee,15,3),M(1,0,ye),w(3,Ie,1,1),M(4,3,ke),w(6,Be,113,42,"ng-template",null,0,A)),t&2&&(o(),E(a.standAlon),o(3),E(!a.standAlon))},dependencies:[K,W,Y,X,se,ae,le,te,re,oe,ie,ne,Q,O,U,q,J,N,D,j]});let l=u;return l})();export{ft as ProduitCreateComponent};
