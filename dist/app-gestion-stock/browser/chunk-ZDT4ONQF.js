import{a as he}from"./chunk-L4RF7HMY.js";import{a as fe,b as _e}from"./chunk-NRMQ4WUC.js";import{b as ge}from"./chunk-CJTN6TSS.js";import{a as ue}from"./chunk-J5REKJTI.js";import{a as w,b as de}from"./chunk-EAROEH6U.js";import{b as ee,c as te,f as ie,h as ne,i as re,j as oe,k as ae,m as me,n as se}from"./chunk-RMR25O2K.js";import{a as ce,b as le}from"./chunk-36NSVSE4.js";import{$ as Z,J as q,K as Y,L as J,P as K,T as Q,U as E,_ as X,p as V,ta as $,v as U,w as H,y as j}from"./chunk-ETPUSV7N.js";import{c as k}from"./chunk-DKLNZNMU.js";import{a as pe}from"./chunk-PTMIGOEM.js";import{b as A,d as G,e as W}from"./chunk-EVAI7AMW.js";import{Cb as g,Ib as M,Kb as L,Lb as R,Mb as z,Nb as r,Ob as a,Pb as f,Sb as D,Tb as x,Wb as C,Yb as s,ec as F,fc as p,ga as l,gb as c,gc as B,ka as I,lc as P,mc as S,nc as y,pc as N,va as d,vc as O,wa as u,wb as h,xa as _,xb as b,ya as v,yb as T}from"./chunk-BXK32XEB.js";var ve=()=>[E,import("./chunk-K4L4KWTC.js").then(i=>i.NgTemplateOutlet),V,W,Z,X,$,k],xe=()=>[import("./chunk-K4L4KWTC.js").then(i=>i.NgTemplateOutlet)];function Pe(i,o){if(i&1){let n=x();r(0,"c-nav-item",3)(1,"button",11),C("click",function(){d(n);let t=s(2);return u(t.retour())}),p(2,"Return"),a()()}if(i&2){let n=s(2);c(),g("routerLink",n.returnUrl)}}function Se(i,o){i&1&&f(0,"c-spinner",8)}function ye(i,o){i&1&&(_(),f(0,"svg",9))}function we(i,o){i&1&&D(0)}function be(i,o){if(i&1){let n=x();r(0,"c-row",1)(1,"c-nav",2),h(2,Pe,3,1,"c-nav-item",3),r(3,"c-nav-item",4)(4,"button",5),C("click",function(){d(n);let t=s();return u(t.cancel())}),p(5,"Annuler"),a()(),r(6,"c-nav-item",3)(7,"button",6),C("click",function(){d(n);let t=s();return u(t.reset())}),p(8,"Reset"),a()(),r(9,"c-nav-item",3)(10,"button",7),C("click",function(){d(n);let t=s();return u(t.create())}),h(11,Se,1,0,"c-spinner",8)(12,ye,1,0,":svg:svg",9),p(13," Cr\xE9er "),a()()()(),h(14,we,1,0,"ng-container",10)}if(i&2){let n=s(),e=F(7);c(2),M(n.toReturn?2:-1),c(9),M(n.sending?11:12),c(3),g("ngTemplateOutlet",e)}}function Te(i,o){i&1&&D(0)}function Me(i,o){if(i&1&&h(0,Te,1,0,"ng-container",10),i&2){s();let n=F(7);g("ngTemplateOutlet",n)}}function De(i,o){if(i&1&&(r(0,"option",24),p(1),a()),i&2){let n=o.$implicit;g("value",n.id),c(),B(n.nom)}}function Fe(i,o){if(i&1){let n=x();r(0,"c-card",1)(1,"c-card-header")(2,"strong",12),p(3,'Veuillez remplir les informations ci-dessous pour cr\xE9er une nouveau "Paiement"'),a()(),r(4,"c-card-body")(5,"c-row",13)(6,"c-col",14),_(),f(7,"svg",15),v(),r(8,"label",16),p(9,"Date de paiement"),a(),r(10,"input",17),y("ngModelChange",function(t){d(n);let m=s();return S(m.item.datePaiement,t)||(m.item.datePaiement=t),u(t)}),a()(),r(11,"c-col",14),_(),f(12,"svg",18),v(),r(13,"label",19),p(14,"Montant pay\xE9"),a(),r(15,"input",20),y("ngModelChange",function(t){d(n);let m=s();return S(m.item.montantPaye,t)||(m.item.montantPaye=t),u(t)}),a()(),r(16,"c-col",14),_(),f(17,"svg",21),v(),r(18,"label",22),p(19,"M\xE9thode de paiement"),a(),r(20,"c-input-group")(21,"select",23),y("ngModelChange",function(t){d(n);let m=s();return S(m.methodePaiement.id,t)||(m.methodePaiement.id=t),u(t)}),R(22,De,2,2,"option",24,L),a(),r(24,"button",25),C("click",function(){d(n);let t=s();return u(t.navigateToMethodePaiementCreate())}),_(),f(25,"svg",9),a()()()()()()}if(i&2){let n=s();c(10),P("ngModel",n.item.datePaiement),c(5),g("value",n.itemF.total),P("ngModel",n.item.montantPaye),c(6),P("ngModel",n.methodePaiement.id),c(),z(n.methodePaiementList)}}var mt=(()=>{let o=class o{constructor(){this.sending=!1,this.standAlon=!0,this.router=l(G),this.route=l(A),this.service=l(de),this.methodePaiementService=l(_e),this.entrepriseService=l(le),this.factureService=l(ge),this.formBuilder=l(me),this.toasterService=l(ue),this.entrepriseSelectedService=l(pe),this.validator=he.init(()=>this.item)}set setItemGetter(e){this.itemGetter=e,this.standAlon=!1}set setItemSetter(e){this.itemSetter=e}set setValidator(e){this.validator=e}ngOnInit(){if(this.service.keepData){let e=this.methodePaiementService.createdItemAfterReturn;e.created&&(this.item.methodePaiement=e.item);let t=this.entrepriseService.createdItemAfterReturn;t.created&&(this.item.entreprise=t.item)}else this.reset(!1);this.service.keepData=!1,this.loadMethodePaiementList(),this.loadEntrepriseList(),this.totalFacture(),this.setDateToToday()}setDateToToday(){let e=new Date,t=("0"+e.getDate()).slice(-2),m=("0"+(e.getMonth()+1)).slice(-2),Ce=e.getFullYear();this.item.datePaiement=new Date(`${Ce}-${m}-${t}`)}loadMethodePaiementList(){this.methodePaiementService.findAllOptimized().subscribe({next:e=>this.methodePaiementList=e,error:e=>console.log(e)})}loadEntrepriseList(){this.entrepriseService.findAllOptimized().subscribe({next:e=>this.entrepriseList=e,error:e=>console.log(e)})}calculPrixImpaye(){return this.item.montantRest-this.item.montantPaye}create(){this.route.queryParams.subscribe(e=>{this.item.idFacture=+e.montant,console.log("Montant re\xE7u:",this.item.idFacture)}),this.item.montantRest=this.calculPrixImpaye(),this.item.idEntreprise=this.entrepriseSelectedService.getEntrepriseSelected(),console.log(this.item),this.validator.validate()&&(this.sending=!0,this.service.create().subscribe({next:e=>{if(this.sending=!1,e!=null){if(this.toReturn){this.item=e,this.router.navigate([this.returnUrl]).then();return}this.item=new w,this.router.navigate(["/ventes/paiement"]).then(()=>{this.toasterService.toast({message:"votre piementt a \xE9t\xE9 effectu\xE9 avec success",color:"success"})})}},error:e=>{this.sending=!1,console.log(e),this.validator.import(e.error)}}))}reset(e=!0){(e||this.item==null)&&(this.item=new w),this.validator.reset()}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.itemGetter()}set item(e){this.itemSetter(e)}itemGetter(){return this.service.item}itemSetter(e){this.service.item=e}get methodePaiement(){return this.item.methodePaiement==null&&(this.item.methodePaiement=new fe),this.item.methodePaiement}set methodePaiement(e){this.item.methodePaiement=e}get entreprise(){return this.item.entreprise==null&&(this.item.entreprise=new ce),this.item.entreprise}set entreprise(e){this.item.entreprise=e}get returnUrl(){return this.service.returnUrl}get toReturn(){return this.service.toReturn()}navigateToMethodePaiementCreate(){this.methodePaiementService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/parametres/methode-paiement/create"]).then()}navigateToEntrepriseCreate(){this.entrepriseService.returnUrl=this.router.url,this.service.keepData=!0,this.router.navigate(["/parametres/entreprise/create"]).then()}cancel(){this.item=new w}retour(){this.router.navigate(["/pays/pays/list"]).then()}set itemsF(e){this.factureService.items=e}get itemF(){return this.factureService.item}set itemF(e){this.factureService.item=e}totalFacture(){this.factureService.findById(this.itemF.id).subscribe({next:e=>{this.factureService.item=e},error:e=>console.log(e)})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=I({type:o,selectors:[["app-paiement-create"]],inputs:{setItemGetter:[0,"getter","setItemGetter"],setItemSetter:[0,"setter","setItemSetter"],setValidator:[0,"validator","setValidator"]},standalone:!0,features:[N],decls:8,vars:2,consts:[["createFrom",""],[1,"mb-3"],[1,"hstack","gap"],[1,"p-2"],[1,"p-2","ms-auto"],["cButton","","color","secondary","variant","outline","routerLink","/ventes/paiement",3,"click"],["cButton","","color","dark",3,"click"],["cButton","","color","primary",3,"click"],["aria-hidden","true","size","sm"],["cIcon","","name","cilPlus"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"click","routerLink"],[1,"responsive-header",2,"color","#1d0528","font-family","'Times New Roman'","font-size","21px","margin-left","300px"],[1,"g-3"],["sm","4"],["cIcon","","name","cil-calendar",2,"color","blue","font-size","30px"],["cLabel","","for","datePaiement",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","datePaiement","type","date","placeholder","DatePaiement","name","datePaiement",3,"ngModelChange","ngModel"],["cIcon","","name","cil-ruble",2,"color","blue","font-size","30px"],["cLabel","","for","montantPaye",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cFormControl","","id","montantPaye","type","number","name","montantPaye",3,"ngModelChange","value","ngModel"],["cIcon","","name","cil-credit-card",2,"color","blue","font-size","30px"],["cLabel","","for","methodePaiement",2,"color","black","font-family","'Times New Roman'","font-size","18px","font-weight","bold"],["cSelect","","id","methodePaiement","name","methodePaiement",3,"ngModelChange","ngModel"],[3,"value"],["cButton","","color","secondary","type","button","variant","outline",3,"click"]],template:function(t,m){t&1&&(h(0,be,15,3),b(1,0,ve),h(3,Me,1,1),b(4,3,xe),h(6,Fe,26,4,"ng-template",null,0,O)),t&2&&(c(),T(m.standAlon),c(3),T(!m.standAlon))},dependencies:[Y,E,Q,K,se,oe,ae,ee,ne,re,te,ie,J,U,H,j,q,V,k],styles:['@charset "UTF-8";.responsive-header[_ngcontent-%COMP%]{font-family:Times New Roman;font-size:21px;margin-left:300px}@media (max-width: 1024px){.responsive-header[_ngcontent-%COMP%]{font-size:18px;margin-left:100px}}@media (max-width: 768px){.responsive-header[_ngcontent-%COMP%]{font-size:16px;margin-left:50px;text-align:center}}@media (max-width: 480px){.responsive-header[_ngcontent-%COMP%]{font-size:14px;margin-left:20px;text-align:center}}']});let i=o;return i})();export{mt as a};
